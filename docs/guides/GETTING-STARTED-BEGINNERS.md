# üöÄ Guia de In√≠cio para Iniciantes - CLI docs-jana

**Bem-vindo!** Este guia ir√° te ensinar do zero como usar a CLI docs-jana para gerenciar workflows N8N e documenta√ß√£o Outline.

---

## üìã √çndice

1. [O Que √â docs-jana?](#o-que-√©-docs-jana)
2. [Pr√©-requisitos](#pr√©-requisitos)
3. [Instala√ß√£o](#instala√ß√£o)
4. [Configura√ß√£o Inicial](#configura√ß√£o-inicial)
5. [Seu Primeiro Comando](#seu-primeiro-comando)
6. [Comandos Essenciais](#comandos-essenciais)
7. [Fluxo de Trabalho T√≠pico](#fluxo-de-trabalho-t√≠pico)
8. [Solu√ß√£o de Problemas](#solu√ß√£o-de-problemas)
9. [Pr√≥ximos Passos](#pr√≥ximos-passos)

---

## üéØ O Que √â docs-jana?

docs-jana √© uma **ferramenta de linha de comando (CLI)** que ajuda voc√™ a:

- ‚úÖ **Fazer backup** de workflows N8N
- ‚úÖ **Migrar workflows** entre inst√¢ncias N8N diferentes
- ‚úÖ **Validar** workflows para detectar problemas
- ‚úÖ **Baixar documenta√ß√£o** do Outline
- ‚úÖ **Automatizar** tarefas repetitivas

**Em termos simples:** √â como ter um assistente que cuida dos seus workflows N8N automaticamente!

---

## üíª Pr√©-requisitos

Antes de come√ßar, voc√™ precisa ter instalado:

### 1. Node.js (JavaScript Runtime)

**O que √©?** Node.js permite executar programas JavaScript no seu computador.

**Como instalar:**
```bash
# Visite: https://nodejs.org/
# Baixe a vers√£o LTS (recomendada)
# Execute o instalador e siga as instru√ß√µes
```

**Como verificar se est√° instalado:**
```bash
node --version
# Deve mostrar algo como: v18.17.0
```

### 2. Acesso ao N8N

Voc√™ precisa de:
- ‚úÖ URL da sua inst√¢ncia N8N (ex: `https://n8n.empresa.com`)
- ‚úÖ API Key do N8N

**Como obter a API Key:**
1. Acesse seu N8N
2. V√° em **Settings ‚Üí API**
3. Clique em **Create API Key**
4. Copie a chave gerada

---

## üì¶ Instala√ß√£o

### M√©todo 1: Instala√ß√£o Global (Recomendado)

```bash
# Navegar at√© a pasta do projeto
cd path/to/docs-jana

# Instalar depend√™ncias
npm install

# Criar link global
npm link

# Testar instala√ß√£o
docs-jana --version
```

### M√©todo 2: Executar Localmente

```bash
# Navegar at√© a pasta do projeto
cd path/to/docs-jana

# Instalar depend√™ncias
npm install

# Executar comandos
node cli.js --version
```

**üí° Dica:** Use a instala√ß√£o global para poder executar `docs-jana` de qualquer pasta!

---

## ‚öôÔ∏è Configura√ß√£o Inicial

### Passo 1: Criar Arquivo .env

O arquivo `.env` guarda suas configura√ß√µes de forma segura.

```bash
# Na pasta do projeto
cp .env.example .env
```

### Passo 2: Editar o Arquivo .env

Abra o arquivo `.env` com um editor de texto e preencha:

```bash
# === N8N Configuration ===

# URL da sua inst√¢ncia N8N
N8N_URL=https://n8n.sua-empresa.com

# API Key do N8N
N8N_API_KEY=cole_sua_api_key_aqui

# (Opcional) Tag para filtrar workflows
N8N_TAG=production


# === Para Migra√ß√£o (Opcional) ===

# N8N Origem (de onde vem os workflows)
SOURCE_N8N_URL=https://source.n8n.com
SOURCE_N8N_API_KEY=source_api_key
SOURCE_N8N_TAG=production

# N8N Destino (para onde v√£o os workflows)
TARGET_N8N_URL=https://target.n8n.com
TARGET_N8N_API_KEY=target_api_key
TARGET_N8N_TAG=production


# === Outline Configuration (Opcional) ===

# URL do Outline
OUTLINE_URL=https://outline.sua-empresa.com

# Token da API do Outline
OUTLINE_API_TOKEN=cole_seu_token_aqui
```

**‚ö†Ô∏è IMPORTANTE:**
- Nunca compartilhe seu arquivo `.env`!
- Nunca commit o `.env` no Git!
- O arquivo `.env.example` pode ser commitado (sem dados sens√≠veis)

---

## üéâ Seu Primeiro Comando

Vamos testar se tudo est√° funcionando!

### 1. Verificar Vers√£o

```bash
docs-jana --version
```

**Resultado esperado:**
```
2.0.0
```

### 2. Ver Menu de Ajuda

```bash
docs-jana --help
```

**Resultado esperado:**
```
Docs-Jana CLI v2.0.0
Unified tool for documentation and workflow management

COMMANDS:
  n8n:download          Download workflows from N8N
  n8n:upload            Upload workflows to N8N
  n8n:verify            Verify migration integrity
  n8n:validate          Validate workflows for duplicate IDs
  ...
```

### 3. Menu Interativo

```bash
docs-jana
```

Use as **setas ‚Üë‚Üì** para navegar e **Enter** para selecionar!

**üéä Parab√©ns!** Se voc√™ viu isso, sua instala√ß√£o est√° funcionando!

---

## üõ†Ô∏è Comandos Essenciais

### 1. Download de Workflows

**O que faz?** Baixa todos os workflows do N8N para seu computador.

```bash
docs-jana n8n:download
```

**Com op√ß√µes:**
```bash
# Baixar apenas workflows com tag espec√≠fica
docs-jana n8n:download --tag production

# Salvar em pasta customizada
docs-jana n8n:download --output ./meus-workflows

# Usar inst√¢ncia SOURCE
docs-jana n8n:download --source
```

**Resultado:**
- Workflows salvos em `./n8n-workflows-[data-hora]/`
- Organizados por tags em subpastas
- Arquivo `_id-mapping.json` criado

---

### 2. Upload de Workflows

**O que faz?** Envia workflows do seu computador para o N8N.

```bash
# Upload b√°sico
docs-jana n8n:upload --input ./n8n-workflows-2025-10-18/

# Teste sem fazer upload real (dry-run)
docs-jana n8n:upload --input ./workflows --dry-run

# Upload de pasta espec√≠fica
docs-jana n8n:upload --input ./workflows --folder production
```

**‚ö†Ô∏è Importante:** O upload acontece em 3 fases:
1. **Fase 1:** Upload inicial
2. **Fase 2:** Remapeamento de IDs
3. **Fase 3:** Re-upload com IDs corretos

---

### 3. Validar Workflows

**O que faz?** Verifica se h√° IDs duplicados sem precisar baixar.

```bash
# Valida√ß√£o simples
docs-jana n8n:validate

# Validar com filtro
docs-jana n8n:validate --tag production

# Salvar relat√≥rio
docs-jana n8n:validate --output ./relatorio.json
```

**Resultado:**
```
‚úì Valida√ß√£o conclu√≠da
‚úì Nenhum ID duplicado encontrado
‚úì 42 workflows validados
```

---

### 4. Verificar Migra√ß√£o

**O que faz?** Verifica se a migra√ß√£o foi bem-sucedida (ZERO erros).

```bash
docs-jana n8n:verify --input ./n8n-workflows-2025-10-18/
```

**Resultado:**
```
‚úÖ MIGRATION VERIFIED SUCCESSFULLY!
   All workflows migrated with ZERO broken links.

   Total workflows: 42
   All checks passed: 4/4
```

---

## üìñ Fluxo de Trabalho T√≠pico

### Cen√°rio 1: Backup Simples

**Objetivo:** Fazer backup dos workflows.

```bash
# 1. Baixar workflows
docs-jana n8n:download --output ./backup-$(date +%Y%m%d)

# 2. Compactar (opcional)
zip -r backup-workflows.zip ./backup-20251018
```

---

### Cen√°rio 2: Migra√ß√£o Entre Ambientes

**Objetivo:** Migrar workflows de DEV para PROD.

```bash
# 1. Validar workflows na origem (antes de baixar)
docs-jana n8n:validate --source --tag production

# 2. Baixar workflows do ambiente SOURCE
docs-jana n8n:download --source --tag production

# 3. Testar upload (dry-run)
docs-jana n8n:upload --input ./n8n-workflows-xxx --dry-run

# 4. Upload real
docs-jana n8n:upload --input ./n8n-workflows-xxx

# 5. Verificar integridade
docs-jana n8n:verify --input ./n8n-workflows-xxx

# ‚úÖ Migra√ß√£o completa!
```

---

### Cen√°rio 3: Valida√ß√£o Regular

**Objetivo:** Verificar workflows periodicamente.

```bash
# Validar workflows production
docs-jana n8n:validate --tag production --output ./validation-$(date +%Y%m%d).json

# Ver relat√≥rio
cat ./validation-20251018.json | jq '.duplicatesFound'
```

**üí° Dica:** Adicione isso ao cron para rodar diariamente!

```bash
# Adicionar ao crontab
crontab -e

# Executar todo dia √†s 9h
0 9 * * * cd /path/to/docs-jana && docs-jana n8n:validate --tag production
```

---

## üÜò Solu√ß√£o de Problemas

### Problema 1: "Command not found"

**Erro:**
```
bash: docs-jana: command not found
```

**Solu√ß√£o:**
```bash
# Reinstalar globalmente
cd /path/to/docs-jana
npm link

# Ou usar diretamente
node cli.js --version
```

---

### Problema 2: "N8N API connection not configured"

**Erro:**
```
Error: N8N API connection not configured
```

**Solu√ß√£o:**
1. Verificar arquivo `.env`:
   ```bash
   cat .env | grep N8N_URL
   cat .env | grep N8N_API_KEY
   ```

2. Se vazio, preencher:
   ```bash
   # Editar .env
   nano .env

   # Adicionar
   N8N_URL=https://n8n.sua-empresa.com
   N8N_API_KEY=sua_api_key
   ```

3. Ou configurar via comando:
   ```bash
   docs-jana n8n:configure-target --url https://n8n.com --api-key abc123
   ```

---

### Problema 3: "Validation failed - duplicates found"

**Erro:**
```
‚ùå VALIDATION FAILED!
   Found 2 duplicate ID(s)

   üìç ID interno: (AAA-BBB-001)
```

**Solu√ß√£o:**
1. Ver relat√≥rio detalhado:
   ```bash
   cat .jana/logs/validation.log
   ```

2. Corrigir no N8N:
   - Acessar workflows duplicados
   - Renomear IDs √∫nicos

3. Validar novamente:
   ```bash
   docs-jana n8n:validate
   ```

---

### Problema 4: "Exit code 1" em scripts

**Erro:**
```
Exit code: 1 (script falhou)
```

**Solu√ß√£o:**
```bash
# Ver o que aconteceu
docs-jana n8n:verify --input ./workflows --verbose

# Verificar logs
cat .jana/logs/errors.log
```

---

## üéì Pr√≥ximos Passos

Agora que voc√™ conhece o b√°sico, explore:

### 1. Documenta√ß√£o Avan√ßada

- **[CLI Commands Reference](CLI-COMMANDS.md)** - Todos os comandos detalhados
- **[Services Integration](services/INTEGRATION-GUIDE.md)** - Como funciona internamente
- **[Directus Schema](DIRECTUS-SCHEMA-EXPLAINED.md)** - Entenda o banco de dados

### 2. Automatiza√ß√£o

```bash
# Script de backup di√°rio
#!/bin/bash
DATE=$(date +%Y%m%d)
docs-jana n8n:download --output ./backups/backup-$DATE
zip -r ./backups/backup-$DATE.zip ./backups/backup-$DATE
rm -rf ./backups/backup-$DATE
```

### 3. Integra√ß√£o com Git

```bash
# Versionar workflows no Git
cd ./n8n-workflows-xxx
git init
git add .
git commit -m "Backup workflows $(date +%Y-%m-%d)"
git remote add origin git@github.com:empresa/n8n-workflows.git
git push
```

### 4. CI/CD Pipeline

```yaml
# .github/workflows/validate.yml
name: Validate Workflows
on: [push]
jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Validate
        run: |
          docs-jana n8n:validate
```

---

## üìö Recursos Adicionais

### Documenta√ß√£o

- [README Principal](../../README.md)
- [Architecture](../architecture/ARCHITECTURE.md)
- [Components](../components/VISUAL-COMPONENTS.md)

### Comunidade

- **Issues:** [GitHub Issues](https://github.com/bitfy-ai/docs-jana/issues)
- **Discuss√µes:** [GitHub Discussions](https://github.com/bitfy-ai/docs-jana/discussions)

### Videos Tutoriais

- üé• [Como Instalar docs-jana](link)
- üé• [Primeira Migra√ß√£o de Workflows](link)
- üé• [Automa√ß√£o com docs-jana](link)

---

## ‚úÖ Checklist do Iniciante

Antes de considerar que dominou o b√°sico, verifique:

- [ ] Instalei Node.js e verifiquei a vers√£o
- [ ] Instalei docs-jana (global ou local)
- [ ] Criei e configurei o arquivo `.env`
- [ ] Executei `docs-jana --version` com sucesso
- [ ] Executei meu primeiro `n8n:download`
- [ ] Entendi o que cada comando faz
- [ ] Sei como ver ajuda (`--help`)
- [ ] Conhe√ßo os comandos essenciais
- [ ] Sei solucionar problemas comuns
- [ ] Li a documenta√ß√£o avan√ßada

**üéä Parab√©ns!** Voc√™ agora √© capaz de usar a CLI docs-jana com confian√ßa!

---

## üí° Dicas Finais

### 1. Sempre use `--help`

```bash
docs-jana n8n:download --help
```

### 2. Teste com `--dry-run` primeiro

```bash
docs-jana n8n:upload --input ./workflows --dry-run
```

### 3. Fa√ßa backups regularmente

```bash
# Todo domingo √†s 2h
0 2 * * 0 docs-jana n8n:download
```

### 4. Mantenha `.env` seguro

```bash
# Adicionar ao .gitignore
echo ".env" >> .gitignore
```

### 5. Valide antes de migrar

```bash
# Sempre validar primeiro!
docs-jana n8n:validate --source
docs-jana n8n:download --source
docs-jana n8n:upload --input ./workflows
docs-jana n8n:verify --input ./workflows
```

---

## ü§ù Precisa de Ajuda?

- **Bug?** [Abra uma issue](https://github.com/bitfy-ai/docs-jana/issues)
- **Pergunta?** [Inicie uma discuss√£o](https://github.com/bitfy-ai/docs-jana/discussions)
- **Sugest√£o?** [Crie um PR](https://github.com/bitfy-ai/docs-jana/pulls)

---

**√öltima Atualiza√ß√£o:** 2025-10-18
**Vers√£o da CLI:** 2.0.0
**Vers√£o do Guia:** 1.0

**Bom trabalho com a CLI docs-jana!** üöÄ
